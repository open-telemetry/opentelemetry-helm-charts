---
# Source: opentelemetry-kube-stack/templates/hooks.yaml
apiVersion: batch/v1
kind: Job
metadata:
  name: opentelemetry-kube-stack-pre-delete-job
  annotations:
    "helm.sh/hook": pre-delete
    "helm.sh/hook-delete-policy": hook-succeeded,hook-failed
spec:
  template:
    spec:
      restartPolicy: Never
      serviceAccountName: delete-resources-sa
      containers:
      - name: delete-resources
        image: bitnami/kubectl:latest
        command:
          - /bin/sh
          - -c
          - |
            kubectl delete instrumentations,opampbridges,opentelemetrycollectors \
              -l helm.sh/chart=opentelemetry-kube-stack-0.3.8
