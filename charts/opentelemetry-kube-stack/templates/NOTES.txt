{{- range $name, $collector := .Values.collectors }}
{{- if $.Values.defaultCRConfig.enabled }}
{{- $collector = (mergeOverwrite (deepCopy $.Values.defaultCRConfig) $collector) }}
{{- end }}
{{- if $collector.updateStrategy }}
[WARNING] Collector '{{ $name }}': the 'updateStrategy' value is no longer supported in OpenTelemetryCollector v1beta1. Please migrate to use the `daemonSetUpdateStrategy` value.
{{- end }}
{{- end }}
OpenTelemetry Kube Stack Helm Chart installation completed successfully!

With the features you've enabled, you can:
{{ range $_, $collector := $.Values.collectors -}}
{{- if $.Values.defaultCRConfig.enabled }}
{{- $collector = (mergeOverwrite (deepCopy $.Values.defaultCRConfig) $collector) }}
{{- end }}
{{- $merged := (dict "Template" $.Template "Files" $.Files "Chart" $.Chart "clusterRole" $.Values.clusterRole "collector" $collector "Release" $.Release "fullnameOverride" $.Values.fullnameOverride "presets" $.Values.presets "namespace" (include "opentelemetry-kube-stack.namespace" $)  "kubelet" $.Values.kubelet "clusterName" $.Values.clusterName) }}
{{- $fullname := (include "opentelemetry-kube-stack.collectorFullname" $merged) }}
{{ range $_, $protocol := list "grpc" "http" -}}
{{ $endpoint := dig "receivers" "otlp" "protocols" $protocol "endpoint" "" $collector.config}}
{{- if and $collector.enabled (ne $endpoint "") -}}
{{- $port := regexFind ":[0-9]+$" $endpoint -}}
* Send OTLP to '{{$fullname}}-collector.{{ include "opentelemetry-kube-stack.namespace" $ }}.svc.cluster.local{{$port}}' ({{$protocol}})
{{ end -}}
{{- end -}}
{{- end -}}
{{- if .Values.instrumentation.enabled -}}
* Annotate your pods with: 'instrumentation.opentelemetry.io/inject-<<language>>: {{.Release.Namespace}}/{{ include "opentelemetry-kube-stack.instrumentation" . }}' to auto-instrument them
{{ end }}

Happy observing!
